<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>利用offset实现动画</title>
  <style media="screen">
    .s{
      width: 50px;
      height: 50px;
      background: rgba(255, 0, 0, 0.5);
      margin-top: 100px;
      position: absolute;

    }
  </style>
</head>
<body>
  <button id="btn1">action!</button>
  <button id="btn2">go back!</button>
  <div class="s"></div>

  <script type="text/javascript">
    var start = document.getElementById('btn1');
    var back = document.getElementById('btn2');
    var flas = document.getElementsByClassName('s')[0];
    var timer;
    start.onclick = function () {
      // clearInterval(timer);
      //
      // timer = setInterval(function () {
      //
      //    if(flas.offsetLeft >= 1000){
      //      clearInterval(timer);
      //      return;
      //    }
      //    flas.style.left = flas.offsetLeft + 10 + 'px';
      // },30)
      moveLeft(flas,1000,10,30);
    }

    back.onclick = function () {
      // clearInterval(timer);
      //
      // timer = setInterval(function () {
      //
      //    if(flas.offsetLeft <= 0){
      //      clearInterval(timer);
      //      return;
      //    }
      //    flas.style.left = flas.offsetLeft - 10 + 'px';
      // },30)
      moveLeft(flas,0,10,30);
    }

   function moveLeft(elem,target,speed,daly){
     clearInterval(moveLeft.timer);
     speed = target > elem.offsetLeft ? speed : -speed;
     moveLeft.timer = setInterval(function(){

       if (Math.abs(elem.offsetLeft - target)<= Math.abs(speed)) {
         elem.offsetLeft=target + 'px';
         clearInterval(moveLeft.timer);
         return;
       }
        elem.style.left = elem.offsetLeft + speed + 'px';
     },daly)
   }


  </script>
</body>
</html>
